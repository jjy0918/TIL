# 모두의 네트워크 7장 - 응용 계층 : 애플리케이션에 데이터 전송하기

## 응용 계층의 역할

### 응용 계층의 역할

- 응용 계층에서는 클라이언트의 요청을 전달하기 위해 서바가 이해할 수 있는 메시지로 변환하여 전송 계층으로 전달한다.
- 이러한 통신을 위해 각 형식에 맞는 프로토콜을 사용한다.
  - 웹 사이트를 보기 위한 HTTP
  - 파일을 전송하기 위한 FTP
  - 메일을 보내기 위한 SMTP
  - 메일을 받기 위한 POP3
  - 네트워크의 IP 주소를 알아내기 위한 DNS

## 웹 서버의 구조(웹 사이트 접속)

### WWW란?

- WWW는 W3나 웹이라고 불린다.
- WWW는 HTML, URL, HTTP 라는 세 가지 기술을 사용한다.

### HTTP란?

- 클라이언트는 웹 사이트를 보기 위해 서버의 80번 포트를 사용하여 HTTP 통신을 한다.
- 클라이언트에서 HTTP 요청을 보내면, 서버는 HTTP 응답을 한다.
- 데이터를 요청할 때 GET이라는 요청 정보와 파일 이름, 버전 등을 서버에 전송한다.
- HTTP/1.0, HTTP/1.1, HTTP/2 등의 버전이 존재한다.
- HTTP 요청은 요청을 보낼 때마다 연결되고 끊는 작업을 반복한다.
  - HTTP/1.1 에서는 keeplive라는 기능이 추가되어 데이터 교환이 모두 완료될 때까지 대기한다.
- HTTP/2 에서는 기존 응답 순서가 동일한 단점을 개선하여, 요청 순서와 응답 순서를 일치시키지 않도록 개선했다.

## DNS 서버의 구조(이름 해석)

### 도메인 이름이란?

- DNS란 URL을 IP주소로 변환하는 서비스(시스템)이다.
- http://www.naver.com에 접속하게 되면, DNS 서버에서 이 이름에 대한 IP 주소를 변환해준다.
  - http://www.naver.com -> 192.168.0.1
- http://www.naver.com => 도메인 이름
- www -> 호스트 이름(서버 이름)
- 해당 DNS 서버에 IP가 없는 경우, 다른 DNS 서버에 요청을 해서 IP 주소를 반환한다.

### 윈도우에서의 DNS 질의 과정과 우선순위

1. DNS cache에 질의.
   - ipconfig /displaydns 명령어를 통해 확인할 수 있다.
   - 자동으로 캐시가 생성됨.
2. C:\windows\system32\drivers\etc\hosts.ics 파일 확인.
   - hosts 파일보다 먼저 검사한다.
   - ics(ICS: Internet Connection Sharing) 파일은 인터넷 연결 공유 시 해당 시스템의 네트워크 주소를 강제로 지정하는 기능
3. C:\windows\system32\drivers\etc\hosts 파일 확인.
4. 로컬에서 설정한 DNS 서버
   - 윈도우 네트워크 인터페이스에서 속성 변경 과정
5. 내부 네트워크 DNS 질의
   - 4번 과정에서 내부 네트워크 DNS로 맵핑했을 경우 ex) Active Directory의 DNS서버, VMWare의 Gateway 등.
6. 외부 네트워크 DNS 질의

   1 ROOT DNS : 전 세계에 13개만 존재하는 최상위 DNS 서버. 트래픽 경감을 위한 미러서버가 존재한다. 13개만 존재하는 이유는 초창기 UDP 패킷 사이즈가 512바이트로 제한되었었기 때문이다.

   2 Top-level Domain Name Server : 예를 들어 .com DNS

   3 Second-level Domain Name Server : 예를 들어 tistory.com DNS

   4 Third-level Domain Name Server : 예를 들어 ftp.tistory.com DNS, ns1.daum.net DNS, ns2.daum.net

## 메일 서버의 구조(SMTP와 POP3)

### 메일의 송수신 구조

- 메일 전송 시 사용되는 프로토콜은 SMTP이다.
  - SMTP는 25번 Port를 사용한다.
- 메일 수신 시 사용되는 프로토콜은 POP3이다.
  - POP3는 110번 Port를 사용한다.
- 클라이언트는 SMTP를 통해 메일 서버로 메일 전송
- 메일 서버간 전송도 SMTP를 이용한다.
- 클라이언트는 POP3를 통해 메일 서버로부터 메일을 수신

### SMTP에 의한 메일 송신과 메일 전송

1.  세션 시작
2.  송신자의 메일 주소를 전송
3.  목적지 메일 주소를 전송
4.  메일 본문 전송을 전송
5.  메일 본문을 전송
6.  세션 종료

### POP3에 의한 메일 수신

- 메일 서버는 서버에 메일을 보관하고 있다가 클라이언트가 POP3로 요청하면 메일을 수신할 수 있도록 보내준다.
- 메일 수신 시 사용자 인증이 필요하다.

1.  세션 시작
2.  수신자의 이름 전송
3.  수신자의 비밀번호 전송
4.  메일 확인
5.  메일 박스에 있는 메일 수신
6.  세션 종료
