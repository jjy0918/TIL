# 6 조건 분기

## 6.1 조건 분기가 중첩되어 낮아지는 가독성

- 여러 개의 조건을 판정하기 위해 if 조건문 안에 if 조건문, 그리고 내부에 또 if 조건문을 넣는 식으로 중첩된 로직을 작성할 수 있다.
- 중첩된 if문의 경우에는 코드의 가독성을 크게 떨어지게 만든다.
  - 어디서 어디까지가 조건문의 처리 블록인지 이해하기가 힘들다.
- 가독성이 떨어지면 코드 이해하는 시간이 오래 걸리기 떄문에 팀 전체의 개발 생산성이 떨어진다.

```java
if(0 < member.hitPoint) {
    if(member.canAct()) {
        if(magic.costMagicPoing <= member.magicPoint) {
            member.consumeMagicPoing(magic.constMagicPoint);
            member.chant(magic);
        }
    }
}
```

### 6.1.1 조기 리턴으로 중첩 제거하기

- 중첩 악마를 퇴치하기 위한 방법 중 하나로 조기 리턴(early return)이 있다.
- 조기 리턴은 조건을 만족하지 않는 경우 곧바로 리턴하는 방법이다.
- 조기 리턴을 적용하면 중첩이 제거 되어고, 조건 로직과 실행 로직이 분리되어 가독성이 좋아진다.
  - 새로운 조건 로직이나 실행 로직이 들어오더라도 매우 간단하게 추가할 수 있다.

```java
if(member.hitPoint <= 0 ) return;
if(!member.canAct()) return;
if(member.magicPoint < magic.costMagicPoint) return;

member.consumeMagicPoing(magic.constMagicPoint);
member.chant(magic);
```

### 6.1.2 가독성을 낮추는 else 구문도 조기 리턴으로 해결하기

- else 구문도 가독성을 나쁘게 만드는 원인 중 하나다
- 불필요한 else 절을 제거하고 조기 리턴을 하자.

## 6.2 switch 조건문 중복

- 값의 종류에 따라 다르게 처리하고 싶을 때 switch 조건문을 많이 사용한다.
- switch 조건문은 악마를 불러들이기 굉장히 쉬운 제어 구문이다.
  - 비슷한 로직이 여러 곳에 중복되어 작성될 수 있다.
  - 데이터가 추가될 경우 빼먹을 가능성이 높아진다.
- switch문을 사용하기 보다는 인터페이스를 사용하여 담당 로직은 해당 클래스 내부에서 처리하도록 하는 것이 좋다.
  - 전략 패턴 등 으로 간단하게 구현할 수 있다.
- switch문 보다는 Map을 사용하면 더욱 간단하고 유용하게 만들 수 있다.

## 6.3 조건 분기 중복과 중첩

- 인터페이스를 사용하면 다중 중첩된 복잡한 분기를 제거하는 데 활용할 수 있다.
- 정책 패턴으로 조건을 집약하여 간단하게 분기 제거할 수 있다.

## 6.4 자료형 확인에 조건 분기 사용하지 않기

- instnceof 를 이용하여 자료형을 판단한 후 특정 로직을 수행하는 것은 좋지 않다.
  - 이러한 로직은 리스코프 치환 원칙을 위반하게 될 가능성이 높다.
- 자료형 확인 후 로직을 작성하기 보다는, 인터페이스를 활용하여 해당 클래스 내부에서 로직을 처리하게 만드는 것이 좋다.