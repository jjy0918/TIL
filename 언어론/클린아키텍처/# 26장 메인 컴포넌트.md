# 26장 메인 컴포넌트

- 모든 시스템에는 최소 하나의 컴포넌트가 존재하며, 이 컴포넌트가 나머지 컴포넌트를 생성하고, 조정하며, 관리한다.
- 이러한 컴포넌트를 메인 이라 부른다.

## 궁극적인 세부사항

- 메인 컴포넌트는 궁극적인 세부사항으로, 가장 낮은 수준의 정책이다.
- 메인은 시스템의 초기 진입점으로 시스템 전반을 담당하는 나머지 기반 설비를 생성한 후, 시스템에서 더 높은 수준을 담당하는 부분으로 제어권을 넘기는 역할을 한다.
- 의존성 주입 프레임워크를 이용하여 의존성을 주입하는 일은 메인 컴포넌트에서 이루어져야 한다.
  - 메인에 의존성이 일단 주입되면, 메인은 의존성 주입 프레임워크를 사용하지 않고도 일반적인 의존성을 분배할 수 있어야 한다.
- 메인은 지저분한 컴포넌트 중 가장 지저분한 컴포넌트다.
- 메인은 클린 아키텍처에서 가장 바깥 원에 위치하는 저수준 모듈이다.
- 메인은 고수준의 시스템을 위한 모든 것을 로드한 후, 제어권을 고수준의 시스템에게 넘긴다.
  - 입력 스트림 생성, 입력 명령어 해석 등은 메인에서 이루어지지만, 실제 처리는 고수준의 컴포넌트에 위임한다.

## 결론

- 메인을 애플리케이션 플러그인이라 생각하자.
- 메인은 초기 조건과 설정을 구성하고, 외부 자원을 모두 수집한 후, 제어권을 애플리케이션의 고수준 정책으로 넘기는 플러그인이다.
- 메인은 플러그인이므로 메인 컴포넌트를 애플리케이션 설정별로 둘 이상의 메인 컴포넌트 형태로 만들 수도 있다.
- 메인을 프러그인 컴포넌트로 여기고, 아키텍처 경계 바깥에 위치한다고 보면 설정 관련 문제를 훨씬 쉽게 해결할 수 있다.